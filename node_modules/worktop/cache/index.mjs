async function e(e,t){let n="string"!=typeof t&&"HEAD"===t.method;n&&(t=new Request(t,{method:"GET"}));let r=await e.match(t);return n&&r&&(r=new Response(null,r)),r}function t(e,t,n,o){return("string"==typeof t||"GET"===t.method)&&r(n)&&(n.headers.has("Set-Cookie")&&(n=new Response(n.body,n)).headers.append("Cache-Control","private=Set-Cookie"),o.waitUntil(e.put(t,n.clone()))),n}var n=new Set([200,203,204,300,301,404,405,410,414,501]);function r(e){if(!n.has(e.status))return!1;if(~(e.headers.get("Vary")||"").indexOf("*"))return!1;let t=e.headers.get("Cache-Control")||"";return!/(private|no-cache|no-store)/i.test(t)}function o(n){return async function(r,o){let a=await e(n,r);if(a)return a;o.defer((e=>{t(n,r,e,o)}))}}export{r as isCacheable,e as lookup,t as save,o as sync};