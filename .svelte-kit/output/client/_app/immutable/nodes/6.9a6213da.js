import{s as J,n as j,o as K,h as B,r as N,b as Q}from"../chunks/scheduler.e80ae01c.js";import{S as R,i as W,g as k,h as E,j as V,f as _,k as h,a as M,x as m,m as D,s as C,n as g,c as H,A as L,o as q}from"../chunks/index.b2ac34d8.js";import{d as F}from"../chunks/data.eb78c716.js";import{m as O}from"../chunks/index.9da56747.js";import{n as X}from"../chunks/_page.svelte_svelte_type_style_lang.32c5e887.js";function U(n){let s,l,t,i,a,e,u,b,c,v,f=n[3].title+"",d,w,I,A,o=n[3].type=="TV Show"&&z(n);return{c(){s=k("div"),l=k("div"),t=D(n[5]),i=C(),a=k("div"),e=k("video"),b=C(),c=k("div"),v=k("div"),d=D(f),w=C(),o&&o.c(),this.h()},l(r){s=E(r,"DIV",{class:!0});var p=V(s);l=E(p,"DIV",{class:!0});var y=V(l);t=g(y,n[5]),y.forEach(_),p.forEach(_),i=H(r),a=E(r,"DIV",{class:!0});var T=V(a);e=E(T,"VIDEO",{src:!0,class:!0}),V(e).forEach(_),b=H(T),c=E(T,"DIV",{class:!0});var S=V(c);v=E(S,"DIV",{class:!0});var P=V(v);d=g(P,f),P.forEach(_),w=H(S),o&&o.l(S),S.forEach(_),T.forEach(_),this.h()},h(){h(l,"class","time svelte-1o28opk"),h(s,"class","clock svelte-1o28opk"),e.controls=!0,B(e.src,u=n[2])||h(e,"src",u),h(e,"class","svelte-1o28opk"),h(v,"class","media-title"),h(c,"class","media-info svelte-1o28opk"),h(a,"class","viewer")},m(r,p){M(r,s,p),m(s,l),m(l,t),M(r,i,p),M(r,a,p),m(a,e),n[9](e),m(a,b),m(a,c),m(c,v),m(v,d),m(c,w),o&&o.m(c,null),I||(A=[L(e,"loadeddata",n[6]),L(e,"timeupdate",n[7]),L(e,"canplay",n[8])],I=!0)},p(r,p){p&32&&q(t,r[5]),p&4&&!B(e.src,u=r[2])&&h(e,"src",u),p&8&&f!==(f=r[3].title+"")&&q(d,f),r[3].type=="TV Show"?o?o.p(r,p):(o=z(r),o.c(),o.m(c,null)):o&&(o.d(1),o=null)},d(r){r&&(_(s),_(i),_(a)),n[9](null),o&&o.d(),I=!1,N(A)}}}function z(n){let s,l,t=(n[4].season?n[4].season:0)+"",i,a,e=(n[4].episode?n[4].episode:0)+"",u,b,c=n[3].episode_title+"",v;return{c(){s=k("div"),l=D("S"),i=D(t),a=D(" E"),u=D(e),b=D(": "),v=D(c),this.h()},l(f){s=E(f,"DIV",{class:!0});var d=V(s);l=g(d,"S"),i=g(d,t),a=g(d," E"),u=g(d,e),b=g(d,": "),v=g(d,c),d.forEach(_),this.h()},h(){h(s,"class","media-caption svelte-1o28opk")},m(f,d){M(f,s,d),m(s,l),m(s,i),m(s,a),m(s,u),m(s,b),m(s,v)},p(f,d){d&16&&t!==(t=(f[4].season?f[4].season:0)+"")&&q(i,t),d&16&&e!==(e=(f[4].episode?f[4].episode:0)+"")&&q(u,e),d&8&&c!==(c=f[3].episode_title+"")&&q(v,c)},d(f){f&&_(s)}}}function Y(n){let s,l,t=n[0]&&U(n);return{c(){s=k("div"),l=k("div"),t&&t.c(),this.h()},l(i){s=E(i,"DIV",{class:!0});var a=V(s);l=E(a,"DIV",{class:!0});var e=V(l);t&&t.l(e),e.forEach(_),a.forEach(_),this.h()},h(){h(l,"class","ui svelte-1o28opk"),h(s,"class","window svelte-1o28opk")},m(i,a){M(i,s,a),m(s,l),t&&t.m(l,null)},p(i,[a]){i[0]?t?t.p(i,a):(t=U(i),t.c(),t.m(l,null)):t&&(t.d(1),t=null)},i:j,o:j,d(i){i&&_(s),t&&t.d()}}}const G="http://209.163.185.11/videos";function Z(n,s,l){let t=!1,i,a,e,u,b=0,c=0;K(()=>{I(),setInterval(I,1e3),F.subscribe(o=>(l(3,e=O.find(r=>r.title==o.currently_watching)),l(4,u=o.library.find(r=>r.title==o.currently_watching)),l(3,e=e||{title:""}),l(4,u=u||{season:1,episode:1}),e.type=="TV Show"?(l(3,e.episode_title=O.find(r=>r.title==e.title).seasons[u.season-1][u.episode-1],e),l(2,a=`${G}/${e.title}/Season ${u.season}/${e.episode_title}.mp4`)):l(2,a=`${G}/${e.title}.mp4`),l(0,t=!0),o))});function v(){l(1,i.currentTime=u.progress*i.duration,i)}function f(){b=i.currentTime,c=i.duration,F.update(o=>{if(t){let p=o.library.find(y=>y.title==e.title);return p&&(p.progress=(i.currentTime/i.duration).toFixed(2)),b>c-38&&X(),o}})}function d(){i.play()}let w="";function I(){let o=new Date,r=o.getHours(),p=o.getMinutes(),y=r>=12?"PM":"AM",T=r%12||12,S=p<10?"0"+p:p;l(5,w=`${T}:${S} ${y}`)}function A(o){Q[o?"unshift":"push"](()=>{i=o,l(1,i)})}return[t,i,a,e,u,w,v,f,d,A]}class ie extends R{constructor(s){super(),W(this,s,Z,Y,J,{})}}export{ie as component};
