import{s as L,h as G,n as N,o as Q}from"../chunks/scheduler.e80ae01c.js";import{S as R,i as W,g as D,s as q,m as V,h as I,j as S,c as A,n as j,f as E,k as y,a as z,x as h,o as T,z as O,A as K}from"../chunks/index.b2ac34d8.js";import{e as M}from"../chunks/each.e59479a4.js";import{m as X}from"../chunks/index.9da56747.js";import{d as P}from"../chunks/data.eb78c716.js";function U(s,t,l){const o=s.slice();return o[9]=t[l],o[11]=l,o}function F(s,t,l){const o=s.slice();return o[12]=t[l],o[11]=l,o}function H(s){let t,l,o=s[11]+1+"",d,p,b,m,_;function f(){return s[7](s[11])}return{c(){t=D("button"),l=V("Season "),d=V(o),p=q(),this.h()},l(v){t=I(v,"BUTTON",{class:!0});var r=S(t);l=j(r,"Season "),d=j(r,o),p=A(r),r.forEach(E),this.h()},h(){y(t,"class",b="item "+(s[1]-1==s[11]?"active":"")+" svelte-uyvkub")},m(v,r){z(v,t,r),h(t,l),h(t,d),h(t,p),m||(_=K(t,"click",f),m=!0)},p(v,r){s=v,r&2&&b!==(b="item "+(s[1]-1==s[11]?"active":"")+" svelte-uyvkub")&&y(t,"class",b)},d(v){v&&E(t),m=!1,_()}}}function J(s){let t,l,o,d,p,b=s[11]+1+"",m,_,f,v=s[9]+"",r,c,i,g,n;function a(){return s[8](s[11])}return{c(){t=D("a"),l=D("div"),o=V("S"),d=V(s[1]),p=V(" E"),m=V(b),_=q(),f=D("div"),r=V(v),c=q(),this.h()},l(u){t=I(u,"A",{href:!0,class:!0});var e=S(t);l=I(e,"DIV",{class:!0});var k=S(l);o=j(k,"S"),d=j(k,s[1]),p=j(k," E"),m=j(k,b),k.forEach(E),_=A(e),f=I(e,"DIV",{class:!0});var B=S(f);r=j(B,v),B.forEach(E),c=A(e),e.forEach(E),this.h()},h(){y(l,"class","label svelte-uyvkub"),y(f,"class","title"),y(t,"href","/watch"),y(t,"class",i="item "+(s[1]==s[3].season&&s[11]+1==s[3].episode?"active":"")+" svelte-uyvkub")},m(u,e){z(u,t,e),h(t,l),h(l,o),h(l,d),h(l,p),h(l,m),h(t,_),h(t,f),h(f,r),h(t,c),g||(n=K(t,"click",a),g=!0)},p(u,e){s=u,e&2&&T(d,s[1]),e&16&&v!==(v=s[9]+"")&&T(r,v),e&10&&i!==(i="item "+(s[1]==s[3].season&&s[11]+1==s[3].episode?"active":"")+" svelte-uyvkub")&&y(t,"class",i)},d(u){u&&E(t),g=!1,n()}}}function Y(s){let t,l,o,d,p,b,m,_,f,v,r,c=M(s[2]),i=[];for(let a=0;a<c.length;a+=1)i[a]=H(F(s,c,a));let g=M(s[4]),n=[];for(let a=0;a<g.length;a+=1)n[a]=J(U(s,g,a));return{c(){t=D("div"),l=D("img"),d=q(),p=D("div"),b=V(s[0]),m=q(),_=D("div"),f=D("div");for(let a=0;a<i.length;a+=1)i[a].c();v=q(),r=D("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){t=I(a,"DIV",{class:!0});var u=S(t);l=I(u,"IMG",{src:!0,alt:!0,class:!0}),d=A(u),p=I(u,"DIV",{class:!0});var e=S(p);b=j(e,s[0]),e.forEach(E),m=A(u),_=I(u,"DIV",{class:!0});var k=S(_);f=I(k,"DIV",{class:!0});var B=S(f);for(let w=0;w<i.length;w+=1)i[w].l(B);B.forEach(E),v=A(k),r=I(k,"DIV",{class:!0});var C=S(r);for(let w=0;w<n.length;w+=1)n[w].l(C);C.forEach(E),k.forEach(E),u.forEach(E),this.h()},h(){G(l.src,o="thumbnails/"+s[0]+".jpeg")||y(l,"src",o),y(l,"alt",""),y(l,"class","svelte-uyvkub"),y(p,"class","section-title svelte-uyvkub"),y(f,"class","season-list svelte-uyvkub"),y(r,"class","episode-list svelte-uyvkub"),y(_,"class","episode-selector svelte-uyvkub"),y(t,"class","wrapper svelte-uyvkub")},m(a,u){z(a,t,u),h(t,l),h(t,d),h(t,p),h(p,b),h(t,m),h(t,_),h(_,f);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(f,null);h(_,v),h(_,r);for(let e=0;e<n.length;e+=1)n[e]&&n[e].m(r,null)},p(a,[u]){if(u&1&&!G(l.src,o="thumbnails/"+a[0]+".jpeg")&&y(l,"src",o),u&1&&T(b,a[0]),u&38){c=M(a[2]);let e;for(e=0;e<c.length;e+=1){const k=F(a,c,e);i[e]?i[e].p(k,u):(i[e]=H(k),i[e].c(),i[e].m(f,null))}for(;e<i.length;e+=1)i[e].d(1);i.length=c.length}if(u&90){g=M(a[4]);let e;for(e=0;e<g.length;e+=1){const k=U(a,g,e);n[e]?n[e].p(k,u):(n[e]=J(k),n[e].c(),n[e].m(r,null))}for(;e<n.length;e+=1)n[e].d(1);n.length=g.length}},i:N,o:N,d(a){a&&E(t),O(i,a),O(n,a)}}}function Z(s,t,l){let o,d="",p=1,b=[],m={};function _(c){l(1,p=c),l(4,o=b[c-1])}function f(c,i){P.update(g=>{let n=g.library.find(a=>a.title==d);return n.season=c,n.episode=i,n.progress=0,g})}Q(()=>{P.update(c=>{l(0,d=c.currently_watching),l(2,b=X.find(g=>g.title==d).seasons);let i=c.library.find(g=>g.title==d);return _(i.season),l(3,m.season=i.season,m),l(3,m.episode=i.episode,m),c})});const v=c=>_(c+1),r=c=>f(p,c+1);return l(4,o=[]),[d,p,b,m,o,_,f,v,r]}class le extends R{constructor(t){super(),W(this,t,Z,Y,L,{})}}export{le as component};
