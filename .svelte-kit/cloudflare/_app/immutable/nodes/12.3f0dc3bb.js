import{s as J,n as L,o as ce,b as fe,h as R,r as ue}from"../chunks/scheduler.e80ae01c.js";import{S as P,i as j,g as y,s as D,h as k,j as T,c as C,y as F,f as h,k as m,a as $,x as _,A as z,z as G,m as V,n as S,l as de,o as O,t as N,b as le,d as H,p as se,r as ie,u as re,v as ne,w as oe}from"../chunks/index.b2ac34d8.js";import{d as A}from"../chunks/data.eb78c716.js";import{m as q}from"../chunks/index.9da56747.js";import{n as ae,p as _e}from"../chunks/_page.svelte_svelte_type_style_lang.32c5e887.js";import{e as U}from"../chunks/each.e59479a4.js";function K(f){let e,t,s=`<i class="fa-solid fa-arrow-right svelte-13esigr"></i>
            Next Episode`,a,c,l=f[0]&&Q();return{c(){l&&l.c(),e=D(),t=y("a"),t.innerHTML=s,this.h()},l(o){l&&l.l(o),e=C(o),t=k(o,"A",{class:!0,href:!0,"data-svelte-h":!0}),F(t)!=="svelte-1ip74wu"&&(t.innerHTML=s),this.h()},h(){m(t,"class","button svelte-13esigr"),m(t,"href","/watch")},m(o,r){l&&l.m(o,r),$(o,e,r),$(o,t,r),a||(c=z(t,"click",ae),a=!0)},p(o,r){o[0]?l||(l=Q(),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(o){o&&(h(e),h(t)),l&&l.d(o),a=!1,c()}}}function Q(f){let e,t='<i class="fa-solid fa-arrow-left alone svelte-13esigr"></i>',s,a;return{c(){e=y("a"),e.innerHTML=t,this.h()},l(c){e=k(c,"A",{class:!0,href:!0,"data-svelte-h":!0}),F(e)!=="svelte-1tiv6tc"&&(e.innerHTML=t),this.h()},h(){m(e,"class","button svelte-13esigr"),m(e,"href","/watch")},m(c,l){$(c,e,l),s||(a=z(e,"click",_e),s=!0)},d(c){c&&h(e),s=!1,a()}}}function he(f){let e,t,s,a=`<i class="fa-solid fa-trash svelte-13esigr"></i>
        Remove from Library`,c,l,o=f[1]=="TV Show"&&K(f);return{c(){e=y("div"),o&&o.c(),t=D(),s=y("a"),s.innerHTML=a,this.h()},l(r){e=k(r,"DIV",{class:!0});var n=T(e);o&&o.l(n),t=C(n),s=k(n,"A",{class:!0,href:!0,"data-svelte-h":!0}),F(s)!=="svelte-p1u6co"&&(s.innerHTML=a),n.forEach(h),this.h()},h(){m(s,"class","button svelte-13esigr"),m(s,"href","/"),m(e,"class","horizontal-scroll default")},m(r,n){$(r,e,n),o&&o.m(e,null),_(e,t),_(e,s),c||(l=z(s,"click",f[2]),c=!0)},p(r,[n]){r[1]=="TV Show"?o?o.p(r,n):(o=K(r),o.c(),o.m(e,t)):o&&(o.d(1),o=null)},i:L,o:L,d(r){r&&h(e),o&&o.d(),c=!1,l()}}}function pe(f,e,t){let s,a;A.subscribe(l=>{let r=l.library.find(u=>u.title==l.currently_watching);r.progress,r.love=r.love?r.love:!1,r.love,r.season==1&&r.episode==1?t(0,s=!1):t(0,s=!0);let n=q.find(u=>u.title==l.currently_watching);t(1,a=n.type)});function c(){A.update(l=>(l.library=l.library.filter(o=>o.title!==l.currently_watching),l))}return[s,a,c]}class ve extends P{constructor(e){super(),j(this,e,pe,he,J,{})}}function W(f,e,t){const s=f.slice();return s[8]=e[t],s[10]=t,s}function X(f,e,t){const s=f.slice();return s[11]=e[t],s[10]=t,s}function Y(f){let e,t,s=f[10]+1+"",a,c,l,o;function r(){return f[4](f[10])}return{c(){e=y("button"),t=V("Season "),a=V(s),this.h()},l(n){e=k(n,"BUTTON",{class:!0});var u=T(e);t=S(u,"Season "),a=S(u,s),u.forEach(h),this.h()},h(){m(e,"class",c="item "+(f[0]==f[10]+1?"active":"")+" svelte-1tyl3kg")},m(n,u){$(n,e,u),_(e,t),_(e,a),l||(o=z(e,"click",r),l=!0)},p(n,u){f=n,u&1&&c!==(c="item "+(f[0]==f[10]+1?"active":"")+" svelte-1tyl3kg")&&m(e,"class",c)},d(n){n&&h(e),l=!1,o()}}}function Z(f){let e,t,s,a=f[10]+1+"",c,l,o=f[8]+"",r,n;return{c(){e=y("button"),t=y("span"),s=V("E"),c=V(a),l=D(),r=V(o),n=D(),this.h()},l(u){e=k(u,"BUTTON",{class:!0});var i=T(e);t=k(i,"SPAN",{style:!0});var d=T(t);s=S(d,"E"),c=S(d,a),d.forEach(h),l=C(i),r=S(i,o),n=C(i),i.forEach(h),this.h()},h(){de(t,"margin-right","1rem"),m(e,"class","item svelte-1tyl3kg")},m(u,i){$(u,e,i),_(e,t),_(t,s),_(t,c),_(e,l),_(e,r),_(e,n)},p(u,i){i&2&&o!==(o=u[8]+"")&&O(r,o)},d(u){u&&h(e)}}}function me(f){let e,t,s,a,c=U(f[2]),l=[];for(let n=0;n<c.length;n+=1)l[n]=Y(X(f,c,n));let o=U(f[1]),r=[];for(let n=0;n<o.length;n+=1)r[n]=Z(W(f,o,n));return{c(){e=y("div"),t=y("div");for(let n=0;n<l.length;n+=1)l[n].c();s=D(),a=y("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=k(n,"DIV",{class:!0});var u=T(e);t=k(u,"DIV",{class:!0});var i=T(t);for(let E=0;E<l.length;E+=1)l[E].l(i);i.forEach(h),s=C(u),a=k(u,"DIV",{class:!0});var d=T(a);for(let E=0;E<r.length;E+=1)r[E].l(d);d.forEach(h),u.forEach(h),this.h()},h(){m(t,"class","horizontal-scroll default svelte-1tyl3kg"),m(a,"class","episodes list svelte-1tyl3kg"),m(e,"class","selector svelte-1tyl3kg")},m(n,u){$(n,e,u),_(e,t);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,null);_(e,s),_(e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(a,null)},p(n,[u]){if(u&9){c=U(n[2]);let i;for(i=0;i<c.length;i+=1){const d=X(n,c,i);l[i]?l[i].p(d,u):(l[i]=Y(d),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=c.length}if(u&2){o=U(n[1]);let i;for(i=0;i<o.length;i+=1){const d=W(n,o,i);r[i]?r[i].p(d,u):(r[i]=Z(d),r[i].c(),r[i].m(a,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}},i:L,o:L,d(n){n&&h(e),G(l,n),G(r,n)}}}function ge(f,e,t){let s,a,c;A.subscribe(i=>{a=i.library,c=i.currently_watching});let l=q.find(i=>i.title==c).seasons,r=a.find(i=>i.title==c).season;function n(i){t(0,r=i)}const u=i=>n(i+1);return f.$$.update=()=>{f.$$.dirty&1&&t(1,s=l[r-1])},[r,s,l,n,u]}class be extends P{constructor(e){super(),j(this,e,ge,me,J,{})}}function ye(f){let e,t=".....";return{c(){e=y("h2"),e.textContent=t},l(s){e=k(s,"H2",{"data-svelte-h":!0}),F(e)!=="svelte-a1w7t4"&&(e.textContent=t)},m(s,a){$(s,e,a)},p:L,i:L,o:L,d(s){s&&h(e)}}}function ke(f){let e,t,s,a,c,l,o=f[3].title+"",r,n,u,i,d,E,w,I,v=f[3].type=="TV Show"&&x(f);i=new ve({});let p=f[3].type=="TV Show"&&ee();return{c(){e=y("div"),t=y("video"),a=D(),c=y("div"),l=y("div"),r=V(o),n=D(),v&&v.c(),u=D(),ie(i.$$.fragment),d=D(),p&&p.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var b=T(e);t=k(b,"VIDEO",{src:!0,class:!0}),T(t).forEach(h),a=C(b),c=k(b,"DIV",{class:!0});var M=T(c);l=k(M,"DIV",{class:!0});var B=T(l);r=S(B,o),B.forEach(h),n=C(M),v&&v.l(M),M.forEach(h),u=C(b),re(i.$$.fragment,b),d=C(b),p&&p.l(b),b.forEach(h),this.h()},h(){t.controls=!0,R(t.src,s=f[2])||m(t,"src",s),m(t,"class","svelte-1uyzt2e"),m(l,"class","media-title svelte-1uyzt2e"),m(c,"class","media-data"),m(e,"class","viewer svelte-1uyzt2e")},m(g,b){$(g,e,b),_(e,t),f[8](t),_(e,a),_(e,c),_(c,l),_(l,r),_(c,n),v&&v.m(c,null),_(e,u),ne(i,e,null),_(e,d),p&&p.m(e,null),E=!0,w||(I=[z(t,"loadeddata",f[5]),z(t,"timeupdate",f[6]),z(t,"canplay",f[7])],w=!0)},p(g,b){(!E||b&4&&!R(t.src,s=g[2]))&&m(t,"src",s),(!E||b&8)&&o!==(o=g[3].title+"")&&O(r,o),g[3].type=="TV Show"?v?v.p(g,b):(v=x(g),v.c(),v.m(c,null)):v&&(v.d(1),v=null),g[3].type=="TV Show"?p?b&8&&H(p,1):(p=ee(),p.c(),H(p,1),p.m(e,null)):p&&(se(),N(p,1,1,()=>{p=null}),le())},i(g){E||(H(i.$$.fragment,g),H(p),E=!0)},o(g){N(i.$$.fragment,g),N(p),E=!1},d(g){g&&h(e),f[8](null),v&&v.d(),oe(i),p&&p.d(),w=!1,ue(I)}}}function x(f){let e,t,s=(f[4].season?f[4].season:0)+"",a,c,l=(f[4].episode?f[4].episode:0)+"",o,r,n=f[3].episode_title+"",u;return{c(){e=y("div"),t=V("S"),a=V(s),c=V(" E"),o=V(l),r=V(", "),u=V(n),this.h()},l(i){e=k(i,"DIV",{class:!0});var d=T(e);t=S(d,"S"),a=S(d,s),c=S(d," E"),o=S(d,l),r=S(d,", "),u=S(d,n),d.forEach(h),this.h()},h(){m(e,"class","media-caption svelte-1uyzt2e")},m(i,d){$(i,e,d),_(e,t),_(e,a),_(e,c),_(e,o),_(e,r),_(e,u)},p(i,d){d&16&&s!==(s=(i[4].season?i[4].season:0)+"")&&O(a,s),d&16&&l!==(l=(i[4].episode?i[4].episode:0)+"")&&O(o,l),d&8&&n!==(n=i[3].episode_title+"")&&O(u,n)},d(i){i&&h(e)}}}function ee(f){let e,t,s;return t=new be({}),{c(){e=y("div"),ie(t.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=T(e);re(t.$$.fragment,c),c.forEach(h),this.h()},h(){m(e,"class","episode-selector")},m(a,c){$(a,e,c),ne(t,e,null),s=!0},i(a){s||(H(t.$$.fragment,a),s=!0)},o(a){N(t.$$.fragment,a),s=!1},d(a){a&&h(e),oe(t)}}}function we(f){let e,t,s,a;const c=[ke,ye],l=[];function o(r,n){return r[0]?0:1}return t=o(f),s=l[t]=c[t](f),{c(){e=y("div"),s.c(),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=T(e);s.l(n),n.forEach(h),this.h()},h(){m(e,"class","page padding-delete")},m(r,n){$(r,e,n),l[t].m(e,null),a=!0},p(r,[n]){let u=t;t=o(r),t===u?l[t].p(r,n):(se(),N(l[u],1,1,()=>{l[u]=null}),le(),s=l[t],s?s.p(r,n):(s=l[t]=c[t](r),s.c()),H(s,1),s.m(e,null))},i(r){a||(H(s),a=!0)},o(r){N(s),a=!1},d(r){r&&h(e),l[t].d()}}}const te="http://209.163.185.11/videos";function Ee(f,e,t){let s=!1,a,c,l,o,r=0,n=0;ce(()=>{A.subscribe(w=>(t(3,l=q.find(I=>I.title==w.currently_watching)),t(4,o=w.library.find(I=>I.title==w.currently_watching)),t(3,l=l||{title:""}),t(4,o=o||{season:1,episode:1}),l.type=="TV Show"?(t(3,l.episode_title=q.find(I=>I.title==l.title).seasons[o.season-1][o.episode-1],l),t(2,c=`${te}/${l.title}/Season ${o.season}/${l.episode_title}.mp4`)):t(2,c=`${te}/${l.title}.mp4`),t(0,s=!0),w))});function u(){t(1,a.currentTime=o.progress*a.duration,a),A.update(w=>{function I(g,b){let M=b.findIndex(B=>JSON.stringify(B)===JSON.stringify(g));return b.splice(M,1),b.unshift(g),b}let v=w.library,p=v.find(g=>g.title==l.title);return I(p,v),w})}function i(){r=a.currentTime,n=a.duration,A.update(w=>{if(s){let v=w.library.find(p=>p.title==l.title);return v&&(v.progress=(a.currentTime/a.duration).toFixed(2)),r>n-2&&ae(),w}})}function d(){a.play()}function E(w){fe[w?"unshift":"push"](()=>{a=w,t(1,a)})}return[s,a,c,l,o,u,i,d,E]}class Ce extends P{constructor(e){super(),j(this,e,Ee,we,J,{})}}export{Ce as component};
